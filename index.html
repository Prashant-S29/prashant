<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prashant's Portfolio</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background-color: #2a2a2a;
        color: #e0e0e0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 40px 20px;
      }

      .container {
        max-width: 600px;
        margin: 0 auto;
        width: 100%;
      }

      .header {
        margin-top: 40px;
        margin-bottom: 40px;
      }

      .header h1 {
        font-size: 1.5rem;
        font-weight: 400;
        line-height: 1.6;
        color: #d0d0d0;
      }

      .buttons {
        display: flex;
        flex-direction: column;
        gap: 0;
        margin-bottom: 40px;
      }

      .btn {
        background-color: transparent;
        border: 1px solid #555;
        color: #e0e0e0;
        padding: 20px 30px;
        text-decoration: none;
        transition: all 0.3s ease;
        border-radius: 4px;
      }

      .btn-title {
        display: block;
        font-size: 1rem;
        margin-bottom: 4px;
        font-weight: 500;
        line-height: 1.5;
      }

      .btn-subtitle {
        display: block;
        font-size: 0.85rem;
        color: #999;
        line-height: 1.4;
      }

      .footer {
        display: flex;
        justify-content: center;
        gap: 30px;
        padding-top: 40px;
        border-top: 1px solid #444;
      }

      .footer a {
        color: #999;
        text-decoration: none;
        font-size: 0.9rem;
        transition: color 0.3s ease;
      }

      .footer a:hover {
        color: #e0e0e0;
      }

      .title {
        font-size: 16px;
        font-weight: normal;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        user-select: none;
      }

      .title.non-collapsible {
        cursor: default;
      }

      .chevron {
        width: 20px;
        height: 20px;
        transition: transform 0.3s ease;
        transform: rotate(0deg);
      }

      .chevron.rotated {
        transform: rotate(180deg);
      }

      .collapsible-content {
        overflow: hidden;
        transition: max-height 0.3s ease, opacity 0.3s ease;
        max-height: 0;
        opacity: 0;
      }

      .collapsible-content.expanded {
        max-height: 5000px;
        opacity: 1;
      }

      .section-gap {
        margin-top: 40px;
      }

      .item-gap {
        margin-top: 20px;
      }

      .btn-link {
        color: #7dd3fc;
        text-decoration: none;
        font-size: 0.85rem;
        transition: color 0.3s ease;
        margin-top: 10px;
        padding-right: 20px;
        display: inline-block;
      }

      .github-link {
        text-align: center;
      }

      @media (max-width: 480px) {
        .header h1 {
          font-size: 1rem;
        }

        .btn {
          padding: 22px 24px;
        }

        .footer {
          gap: 20px;
          font-size: 0.85rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1 id="intro"></h1>
      </div>

      <div class="buttons" id="content"></div>
    </div>

    <div class="footer" id="footer"></div>

    <script>
      function toggleSection(sectionId) {
        const content = document.getElementById(sectionId);
        const chevron = document.querySelector(`[data-section="${sectionId}"]`);

        content.classList.toggle('expanded');
        chevron.classList.toggle('rotated');
      }

      function createChevronIcon(isExpanded = false) {
        return `<svg class="chevron ${
          isExpanded ? 'rotated' : ''
        }" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>`;
      }

      async function loadPortfolio() {
        try {
          const response = await fetch('data.json');
          const data = await response.json();

          document.getElementById('intro').textContent = data.intro;

          const content = document.getElementById('content');
          let html = '';

          html += `<h1 class="title non-collapsible">Currently working with</h1>`;
          if (data.currentCompany.companyName) {
            html += `<div class="item-gap"></div>`;
            html += `
              <div class="btn">
                <span class="btn-title">${data.currentCompany.role} - ${
              data.currentCompany.companyName
            }</span>
                <span class="btn-subtitle" style="margin-bottom: 10px">${
                  data.currentCompany.location
                } (${data.currentCompany.jobType}) | ${
              data.currentCompany.from
            }${
              data.currentCompany.to ? ' - ' + data.currentCompany.to : ''
            }</span>
                <span class="btn-subtitle">${data.currentCompany.desc}</span>
              </div>
            `;
          } else {
            html += `<div class="item-gap"></div>`;
            html += `
              <div class="btn">
                <span class="btn-subtitle">404</span>
              </div>
            `;
          }

          if (data.articles && data.articles.length > 0) {
            html += `<div class="section-gap"></div>`;
            const isMultiple = data.articles.length > 1;

            if (isMultiple) {
              html += `
                <h1 class="title" onclick="toggleSection('articles-content')">
                  Useful Reads
                  <span data-section="articles-content">${createChevronIcon(
                    false,
                  )}</span>
                </h1>
                <div id="articles-content" class="collapsible-content">
              `;
            } else {
              html += `<h1 class="title non-collapsible">Useful Reads</h1>`;
            }

            data.articles.forEach((article, index) => {
              html += `<div class="item-gap"></div>`;
              html += `
                <div class="btn">
                  <span class="btn-title">${article.title}</span>
                  <span class="btn-subtitle" style="margin-bottom: 10px">${article.desc}</span>
                  <a href="${article.link}" target="_blank" class="btn-link">${article.link}</a>
                </div>
              `;
            });

            if (isMultiple) html += `</div>`;
          }

          const currentProjects = data.projects.filter((p) => p.isCurrent);
          if (currentProjects.length > 0) {
            html += `<div class="section-gap"></div>`;
            html += `<h1 class="title non-collapsible">Currently building</h1>`;

            currentProjects.forEach((project, index) => {
              html += `<div class="item-gap"></div>`;
              html += `<div class="btn">`;
              html += `<span class="btn-title">${project.name}</span>`;
              project.desc.forEach((desc, descIndex) => {
                html += `<span class="btn-subtitle"${
                  descIndex > 0
                    ? ' style="margin-top: 10px; margin-bottom: 10px"'
                    : ''
                }>${desc}</span>`;
              });
              if (project.liveLink) {
                html += `<a href="${project.liveLink}" target="_blank" class="btn-link">${project.liveLink}</a>`;
              }
              if (project.github) {
                html += `<a href="${project.github}" target="_blank" class="btn-link">${project.github}</a>`;
              }
              html += `</div>`;
            });
          }

          if (data.pastExperience && data.pastExperience.length > 0) {
            html += `<div class="section-gap"></div>`;
            const isMultiple = data.pastExperience.length > 1;

            if (isMultiple) {
              html += `
                <h1 class="title" onclick="toggleSection('experience-content')">
                  Past Experience
                  <span data-section="experience-content">${createChevronIcon(
                    false,
                  )}</span>
                </h1>
                <div id="experience-content" class="collapsible-content">
              `;
            } else {
              html += `<h1 class="title non-collapsible">Past Experience</h1>`;
            }

            data.pastExperience.forEach((exp, index) => {
              html += `<div class="item-gap"></div>`;
              html += `
                <div class="btn">
                  <span class="btn-title">${exp.role} - ${
                exp.companyName
              }</span>
                  <span class="btn-subtitle" style="margin-bottom: 10px">${
                    exp.location
                  } (${exp.jobType}) | ${exp.from} - ${exp.to}</span>
                  <span class="btn-subtitle" style="margin-bottom: 10px">${
                    exp.desc
                  }</span>
                  ${
                    exp.website
                      ? `<a href="${exp.website}" target="_blank" class="btn-link">${exp.website}</a>`
                      : ''
                  }
                </div>
              `;
            });

            if (isMultiple) html += `</div>`;
          }

          const pastWork = data.projects.filter(
            (p) => !p.isCurrent && !p.isSideProject,
          );
          if (pastWork.length > 0) {
            html += `<div class="section-gap"></div>`;
            const isMultiple = pastWork.length > 1;

            if (isMultiple) {
              html += `
                <h1 class="title" onclick="toggleSection('pastwork-content')">
                  Past work
                  <span data-section="pastwork-content">${createChevronIcon(
                    false,
                  )}</span>
                </h1>
                <div id="pastwork-content" class="collapsible-content">
              `;
            } else {
              html += `<h1 class="title non-collapsible">Past work</h1>`;
            }

            pastWork.forEach((project, index) => {
              html += `<div class="item-gap"></div>`;
              html += `<div class="btn">`;
              html += `<span class="btn-title">${project.name}</span>`;
              project.desc.forEach((desc, descIndex) => {
                html += `<span class="btn-subtitle" style="margin-bottom: 10px">${desc}</span>`;
              });
              if (project.liveLink) {
                html += `<a href="${project.liveLink}" target="_blank" class="btn-link">${project.liveLink}</a>`;
              }
              if (project.github) {
                html += `<a href="${project.github}" target="_blank" class="btn-link">${project.github}</a>`;
              }
              html += `</div>`;
            });

            if (isMultiple) html += `</div>`;
          }

          const sideProjects = data.projects.filter((p) => p.isSideProject);
          if (sideProjects.length > 0) {
            html += `<div class="section-gap"></div>`;
            const isMultiple = sideProjects.length > 1;

            if (isMultiple) {
              html += `
                <h1 class="title" onclick="toggleSection('sideprojects-content')">
                  Side Projects (mostly never completed)
                  <span data-section="sideprojects-content">${createChevronIcon(
                    false,
                  )}</span>
                </h1>
                <div id="sideprojects-content" class="collapsible-content">
              `;
            } else {
              html += `<h1 class="title non-collapsible">Side Projects (mostly never completed)</h1>`;
            }

            sideProjects.forEach((project, index) => {
              html += `<div class="item-gap"></div>`;
              html += `<div class="btn">`;
              html += `<span class="btn-title">${project.name}</span>`;
              project.desc.forEach((desc, descIndex) => {
                html += `<span class="btn-subtitle" style="margin-bottom: 10px">${desc}</span>`;
              });
              if (project.liveLink) {
                html += `<a href="${project.liveLink}" target="_blank" class="btn-link">${project.liveLink}</a>`;
              }
              if (project.github) {
                html += `<a href="${project.github}" target="_blank" class="btn-link">${project.github}</a>`;
              }
              html += `</div>`;
            });

            if (isMultiple) html += `</div>`;
          }

          if (
            data.experimentalProjects &&
            data.experimentalProjects.length > 0
          ) {
            html += `<div class="section-gap"></div>`;
            const isMultiple = data.experimentalProjects.length > 1;

            if (isMultiple) {
              html += `
                <h1 class="title" onclick="toggleSection('experimental-content')">
                  Experimental Projects
                  <span data-section="experimental-content">${createChevronIcon(
                    false,
                  )}</span>
                </h1>
                <div id="experimental-content" class="collapsible-content">
              `;
            } else {
              html += `<h1 class="title non-collapsible">Experimental Projects</h1>`;
            }

            data.experimentalProjects.forEach((project, index) => {
              html += `<div class="item-gap"></div>`;
              html += `<div class="btn">`;
              html += `<span class="btn-title">${project.name}</span>`;
              project.desc.forEach((desc, descIndex) => {
                html += `<span class="btn-subtitle" style="margin-bottom: 10px">${desc}</span>`;
              });
              if (project.liveLink) {
                html += `<a href="${project.liveLink}" target="_blank" class="btn-link">${project.liveLink}</a>`;
              }
              if (project.github) {
                html += `<a href="${project.github}" target="_blank" class="btn-link">${project.github}</a>`;
              }
              html += `</div>`;
            });

            if (isMultiple) html += `</div>`;
          }

          if (data.archivedProjects && data.archivedProjects.length > 0) {
            html += `<div class="section-gap"></div>`;
            const isMultiple = data.archivedProjects.length > 1;

            if (isMultiple) {
              html += `
                <h1 class="title" onclick="toggleSection('archived-content')">
                  Archived
                  <span data-section="archived-content">${createChevronIcon(
                    false,
                  )}</span>
                </h1>
                <div id="archived-content" class="collapsible-content">
              `;
            } else {
              html += `<h1 class="title non-collapsible">Archived</h1>`;
            }

            data.archivedProjects.forEach((project, index) => {
              html += `<div class="item-gap"></div>`;
              html += `<div class="btn">`;
              html += `<span class="btn-title">${project.name}</span>`;
              project.desc.forEach((desc, descIndex) => {
                html += `<span class="btn-subtitle" style="margin-bottom: 10px">${desc}</span>`;
              });
              if (project.liveLink) {
                html += `<a href="${project.liveLink}" target="_blank" class="btn-link">${project.liveLink}</a>`;
              }
              if (project.github) {
                html += `<a href="${project.github}" target="_blank" class="btn-link">${project.github}</a>`;
              }
              html += `</div>`;
            });

            if (isMultiple) html += `</div>`;
          }

          html += `<div class="section-gap"></div>`;
          html += `
            <div class="btn github-link">
              <span class="btn-subtitle">Check more projects on my GitHub</span>
            </div>
          `;

          content.innerHTML = html;

          const footer = document.getElementById('footer');
          footer.innerHTML = `
            <a href="${data.social.github}" target="_blank">GitHub</a>
            <a href="${data.social.twitter}" target="_blank">Twitter</a>
          `;
        } catch (error) {
          console.error('Error loading portfolio data:', error);
        }
      }

      loadPortfolio();
    </script>
  </body>
</html>
